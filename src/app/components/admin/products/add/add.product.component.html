<div class="row">
  <div class="large-12 columns text-center">
    <h2>{{ msg }}</h2>
  </div>
</div>


<div class="row">
  <div class="large-3 columns">
    <div class="file-upload">
      <label for="photo" class="button">Upload foto</label>
      <input style="visibility: hidden" id="photo" type="file" (change)="fileChangeListener($event)">
    </div>
    <button class="button" *ngIf="data.image" (click)="preview()">Voorbeeld</button>
  </div>
  <div class="large-9 columns">
    <img-cropper [image]="data" [settings]="cropperSettings" (onCrop)="cropped($event)" #cropper [hidden]="!data.image"></img-cropper>
  </div>
</div>

<form [formGroup]="addProductForm" (ngSubmit)="submitForm(addProductForm.value)">
  <div class="row">
    <div class="large-5 columns">
      <label [ngClass]="{ 'error': !addProductForm.controls['name'].valid && addProductForm.controls['name'].touched }">
        Product naam
        <input type="text" [formControl]="addProductForm.controls['name']" [ngClass]="{ 'error': !addProductForm.controls['name'].valid && addProductForm.controls['name'].touched }" />
      </label>
      <small *ngIf="!addProductForm.controls['name'].valid && addProductForm.controls['name'].touched" class="error">
        Product naam is verplicht
      </small>
    </div>
    <div class="large-4 columns">
      <label [ngClass]="{ 'error': !addProductForm.controls['category'].valid && addProductForm.controls['category'].touched }">
        Categorie
        <select [formControl]="addProductForm.controls['category']" [ngClass]="{ 'error': !addProductForm.controls['category'].valid && addProductForm.controls['category'].touched }">
          <option *ngFor="let category of categories" [value]="category.category">{{category.category}}</option>
        </select>
      </label>
      <small *ngIf="!addProductForm.controls['category'].valid && addProductForm.controls['category'].touched" class="error">
        Categorie is verplicht
      </small>
    </div>
    <div class="large-2 columns">
      <label for="price" [ngClass]="{ 'error': !addProductForm.controls['price'].valid && addProductForm.controls['price'].touched }">Prijs</label>
      <div class="input-group">
        <span class="input-group-label">&euro;</span>
        <input class="input-group-field" type="number" [formControl]="addProductForm.controls['price']" [ngClass]="{ 'error': !addProductForm.controls['price'].valid && addProductForm.controls['price'].touched }">
      </div>
      <small *ngIf="!addProductForm.controls['price'].valid && addProductForm.controls['price'].touched" class="error" style="margin-top: -16px">
        Prijs is verplicht
      </small>
    </div>
    <div class="large-1 columns">
      <label [ngClass]="{ 'error': !addProductForm.controls['amount'].valid && addProductForm.controls['amount'].touched }">
        Aantal
        <input type="number" [formControl]="addProductForm.controls['amount']" [ngClass]="{ 'error': !addProductForm.controls['amount'].valid && addProductForm.controls['amount'].touched }" />
      </label>
      <small *ngIf="!addProductForm.controls['amount'].valid && addProductForm.controls['amount'].touched" class="error">
        Aantal is verplicht
      </small>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <label [ngClass]="{ 'error': !addProductForm.controls['description'].valid && addProductForm.controls['description'].touched }">
        Beschrijving
        <textarea id="description" [formControl]="addProductForm.controls['description']" [ngClass]="{ 'error': !addProductForm.controls['description'].valid && addProductForm.controls['description'].touched }"></textarea>
      </label>
      <small *ngIf="!addProductForm.controls['description'].valid && addProductForm.controls['description'].touched" class="error">
        Beschrijving is verplicht
      </small>
    </div>
  </div>
  <input type="text" style="visibility: hidden" [formControl]="addProductForm.controls['photo']" />
  <div class="row">
    <div class="large-2 columns end">
      <button class="button" type="submit" [disabled]="!addProductForm.valid || disabled">Opslaan</button>
    </div>
  </div>
</form>
